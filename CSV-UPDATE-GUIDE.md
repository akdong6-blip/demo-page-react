# CSV 데이터 업데이트 가이드

이 문서는 BECON cloud 프론트엔드 프로젝트에서 CSV 데이터와 외부온도 데이터를 업데이트하는 방법을 설명합니다.

## ⚠️ 중요: 초기 설정 필요

**현재 코드는 Git 기반 CSV를 사용하도록 설정되어 있지만, 실제 데이터(935개 현장)를 먼저 추가해야 합니다.**

## 📋 초기 설정 (최초 1회만)

### 1단계: 실제 CSV 파일 다운로드

1. 브라우저에서 다음 URL을 엽니다:
   \`\`\`
   https://hebbkx1anhila5yf.public.blob.vercel-storage.com/sites_지역명통일-mZ6vACXTfhwAAv5mKF4p6fdFR3kvOF.csv
   \`\`\`

2. 파일을 `sites.csv`로 저장합니다 (935개 현장, 6,444개 레코드)

### 2단계: 프로젝트에 CSV 파일 추가

1. 프로젝트 폴더의 `public/data/` 디렉토리를 엽니다
2. 다운로드한 `sites.csv` 파일을 이 폴더에 복사합니다
3. 기존 샘플 `sites.csv` 파일(10개 레코드)을 덮어씁니다

### 3단계: Git으로 커밋 및 푸시

\`\`\`bash
git add public/data/sites.csv
git commit -m "실제 CSV 데이터로 업데이트 (935개 현장)"
git push
\`\`\`

**완료!** 이제 웹사이트에 935개 현장 데이터가 표시됩니다.

---

## 🔄 CSV 데이터 업데이트 방법 (일상적인 업데이트)

초기 설정 후에는 다음과 같이 CSV 데이터를 업데이트할 수 있습니다:

### 1단계: CSV 파일 수정

1. `public/data/sites.csv` 파일을 Excel 또는 텍스트 에디터로 엽니다
2. 필요한 데이터를 수정합니다
3. **반드시 UTF-8 인코딩으로 저장**합니다

### 2단계: Git으로 푸시

\`\`\`bash
git add public/data/sites.csv
git commit -m "CSV 데이터 업데이트: [변경 내용 설명]"
git push
\`\`\`

**자동 배포:** Git push 후 Vercel이 자동으로 배포하여 웹사이트에 반영됩니다.

---

## 🌡️ 외부온도 데이터 업데이트 방법

외부온도와 예년 온도는 `public/data/weather-config.json` 파일에서 관리됩니다.

### 1단계: JSON 파일 수정

`public/data/weather-config.json` 파일을 엽니다:

\`\`\`json
{
  "currentTemp": 26,
  "normalTemp": 29,
  "unit": "°C"
}
\`\`\`

- `currentTemp`: 현재 외부온도
- `normalTemp`: 예년 평균온도
- `unit`: 온도 단위

### 2단계: Git으로 푸시

\`\`\`bash
git add public/data/weather-config.json
git commit -m "외부온도 업데이트: 현재 26°C, 예년 29°C"
git push
\`\`\`

---

## 📊 CSV 파일 형식

CSV 파일은 다음 19개의 열(컬럼)을 포함해야 합니다:

| 열 이름 | 데이터 타입 | 예시 |
|---------|------------|------|
| 현장명 | 텍스트 | H시범_신성쇼핑2 |
| ID_SITE | 숫자 | 10022298 |
| 분석일수(일) | 숫자 | 27 |
| 절감사용량(Kwh) | 숫자 | 12196 |
| 비절감절감량(Kwh) | 숫자 | 13234 |
| 절감량(Kwh) | 숫자 | 1038 |
| 절감금액(원) | 숫자 | 1550558 |
| 비절감금액(원) | 숫자 | 1684988 |
| 절감비용(원) | 텍스트 | 134430 |
| 월 | 숫자 | 3 |
| 연 | 숫자 | 2024 |
| 현장 구분 | 텍스트 | 대형 |
| 업태 | 텍스트 | 상업시설 |
| 실내기 대수 | 숫자 | 134 |
| 구분 | 텍스트 | 체험 |
| 절감률 | 텍스트 | 7.80% |
| 지역 | 텍스트 | 인천 |
| 한전 요금 | 텍스트 | 일반 산업용(갑) |
| 탄소배출량 | 텍스트 | 반영 예정 |

---

## 🔧 CSV 파일 준비하기

### UTF-8 인코딩으로 저장하기

**중요:** CSV 파일은 반드시 **UTF-8 인코딩**으로 저장해야 합니다.

#### Excel에서 UTF-8 CSV로 저장하는 방법:

1. Excel에서 데이터 파일을 엽니다
2. **파일** → **다른 이름으로 저장** 클릭
3. **파일 형식**에서 **CSV UTF-8(쉼표로 분리)(*.csv)** 선택
4. 파일 이름을 `sites.csv`로 입력하고 **저장** 클릭

### 지역명 통일하기

Excel에서 **찾기 및 바꾸기**(Ctrl+H) 기능을 사용하여 지역명을 통일하세요:

| 변경 전 | 변경 후 |
|---------|---------|
| 서울특별시, 서울시 | 서울 |
| 인천광역시, 인천시 | 인천 |
| 경기도 | 경기 |
| 부산광역시, 부산시 | 부산 |
| 대구광역시, 대구시 | 대구 |
| 광주광역시, 광주시 | 광주 |
| 대전광역시, 대전시 | 대전 |
| 울산광역시, 울산시 | 울산 |
| 세종특별자치시 | 세종 |
| 강원특별자치도, 강원도 | 강원 |
| 충청북도 | 충북 |
| 충청남도 | 충남 |
| 전북특별자치도, 전라북도 | 전북 |
| 전라남도 | 전남 |
| 경상북도 | 경북 |
| 경상남도 | 경남 |
| 제주특별자치도, 제주도 | 제주 |

---

## 🔍 문제 해결

### 문제: 한글이 깨져서 표시됩니다

**해결 방법:** CSV 파일을 UTF-8 인코딩으로 다시 저장하세요.

### 문제: 데이터가 10개만 표시됩니다

**해결 방법:** 초기 설정을 완료하지 않았습니다. 위의 "초기 설정" 단계를 따라 실제 CSV 파일(935개 현장)을 다운로드하여 추가하세요.

### 문제: 데이터가 표시되지 않습니다

**해결 방법:**
1. 파일 이름이 정확히 `sites.csv`인지 확인
2. 파일이 `public/data/` 폴더에 있는지 확인
3. 브라우저 콘솔(F12)에서 에러 메시지 확인

### 문제: 필터가 작동하지 않습니다

**해결 방법:**
1. CSV 헤더가 위의 표와 정확히 일치하는지 확인
2. 월 데이터가 숫자(1-12)인지 확인
3. 현장 구분이 "대형", "중형", "중소형", "소형" 중 하나인지 확인

### 문제: 외부온도가 업데이트되지 않습니다

**해결 방법:**
1. `public/data/weather-config.json` 파일이 존재하는지 확인
2. JSON 형식이 올바른지 확인 (중괄호, 쉼표, 따옴표)
3. 브라우저 캐시를 지우고 새로고침 (Ctrl+Shift+R)

---

## 💡 요약

**Git 기반 워크플로우:**

1. **CSV 데이터 업데이트:**
   - `public/data/sites.csv` 파일 수정
   - UTF-8로 저장
   - Git commit & push

2. **외부온도 업데이트:**
   - `public/data/weather-config.json` 파일 수정
   - Git commit & push

3. **자동 배포:**
   - Git push 후 Vercel이 자동으로 배포
   - 몇 분 내에 웹사이트에 반영

**주의사항:**
- 최초 1회는 Vercel Blob에서 실제 CSV 파일(935개 현장)을 다운로드하여 추가해야 합니다
- 모든 파일은 UTF-8 인코딩으로 저장해야 합니다
- Git push 후 배포가 완료될 때까지 2-3분 정도 소요됩니다
